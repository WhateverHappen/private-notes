# 基本语法

```
if [command] 
then
	do something
elif [command]
then
	do something
else
	do something
fi
```

注意：

> 1. []表示条件测试。这里的空格很重要。要注意在'['的后面和']'的前面，即判断条件和中括号之间都必需要有空格。
> 2. then和条件判断语句可以放在同一行，但是需要用分号“；”对其进行分隔。
> 3. 注意对判断条件中变量的处理，需要加引号，以免一些不必要的错误。没有加引号会在一些含有空格等的字符串变量判断的时候产生错误。
> 4. 判断不支持浮点数。
> 5. 如果只单独使用>或者<号，系统会认为是输出或输入重定向。因此要对这些符号进行转义。
> 6. 使用-z或者-n检查长度的时候，没有定义的变量也为0.
> 7. 空变量和没有初始化的变量可能会对shell脚本测试产生灾难性的影响，因此在不确定变量的内容的时候，在测试前最好使用-n或者-z测试一下。

# 判断参数

## 字符串判断

```
str1 = str2				当两个字符串有相同内容长度时为真
str1 != str2			当str1和str2不等时为真
-n str					当str长度大于0时为真
-z str					当str长度为0时为真
str						当str非空时为真
```

## 数字的判断

```
int1 -eq int2			相等为真
int1 -ne int2			两数不等为真 
int1 -gt int2			int1大于int2为真 
int1 -ge int2			int1大于等于int2为真 
int1 -lt int2			int1小于int2为真 
int1 -le int2			int1小于等于int2为真
```

## 文件的判断

```
-r file					用户可读为真 
-w file					用户可写为真 
-x file					用户可执行为真 
-f file					文件为正规文件为真 
-d file					文件为目录为真 
-c file					文件为字符特殊文件为真 
-b file					文件为块特殊文件为真 
-s file					文件大小非0时为真 
-t file					当文件描述符(默认为1)指定的设备为终端时为真
```

## 复杂逻辑判断

```
-a						与
-o						或
!						非
```

## 其他

if高级特性：

+ 双圆括号(())：表示数学表达式
    在判断命令中只允许在比较重进行简单的算术操作，而双圆括号提供更多的数学符号，而且在双圆括号中，'>'和'<'不需要转义
+ 双方括号[[]]：表示高级字符串处理函数
    双方括号中判断命令使用标准的字符串比较，还可以使用匹配模式，从而定义与字符串相匹配的正则表达式。

双括号的作用：

在shell中，[ $a != 1 || $b = 2 ]是不允许出现的，要用[ $a != 1 ] || [ $b = 2 ]，而双括号就可以解决这个问题的，[[ $a != 1 || $b = 2 ]]。又比如这个[ "$a" -lt "$b" ]，也可以改成双括号的形式(("$a" < "$b"))

# 附录

```
[ -a FILE ] 如果 FILE 存在则为真。
[ -b FILE ] 如果 FILE 存在且是一个块文件则返回为真。
[ -c FILE ] 如果 FILE 存在且是一个字符文件则返回为真。
[ -d FILE ] 如果 FILE 存在且是一个目录则返回为真。
[ -e FILE ] 如果 指定的文件或目录存在时返回为真。
[ -f FILE ] 如果 FILE 存在且是一个普通文件则返回为真。
[ -g FILE ] 如果 FILE 存在且设置了SGID则返回为真。
[ -h FILE ] 如果 FILE 存在且是一个符号符号链接文件则返回为真。（该选项在一些老系统上无效）
[ -k FILE ] 如果 FILE 存在且已经设置了冒险位则返回为真。
[ -p FILE ] 如果 FILE 存并且是命令管道时返回为真。
[ -r FILE ] 如果 FILE 存在且是可读的则返回为真。
[ -s FILE ] 如果 FILE 存在且大小非0时为真则返回为真。
[ -u FILE ] 如果 FILE 存在且设置了SUID位时返回为真。
[ -w FILE ] 如果 FILE 存在且是可写的则返回为真。（一个目录为了它的内容被访问必然是可执行的）
[ -x FILE ] 如果 FILE 存在且是可执行的则返回为真。
[ -O FILE ] 如果 FILE 存在且属有效用户ID则返回为真。
[ -G FILE ] 如果 FILE 存在且默认组为当前组则返回为真。（只检查系统默认组）
[ -L FILE ] 如果 FILE 存在且是一个符号连接则返回为真。
[ -N FILE ] 如果 FILE 存在 and has been mod如果ied since it was last read则返回为真。
[ -S FILE ] 如果 FILE 存在且是一个套接字则返回为真。
[ FILE1 -nt FILE2 ] 如果 FILE1 比 FILE2 新, 或者 FILE1 存在但是 FILE2 不存在则返回为真。
[ FILE1 -ot FILE2 ] 如果 FILE1 比 FILE2 老, 或者 FILE2 存在但是 FILE1 不存在则返回为真。
[ FILE1 -ef FILE2 ] 如果 FILE1 和 FILE2 指向相同的设备和节点号则返回为真。
```

