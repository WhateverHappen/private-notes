# 页式存储

## 页面和物理块

页式存储管理是将一个进程的逻辑地址空间分成若干大小相等的片，成为页面或页，并为各页加以编号，从开始。相应的，把内存空间分成与页面相同大小的若干个存储块，成为块或页框，也加以编号。在为进程分配内存时，以块为单位将进程中的若干个页分别装入多个可以不相邻的物理块中。由于进程的最后一页经常装不满一块而形成了不可利用的碎片，称之为**内部碎片**。

## 页面大小

在分页系统中的页面大小应适中。

页面若太小，一方面可使内存碎片减小，有利于提高内存利用率。但是另一方面也会使每个进程占用较多的页面，从而导致进程页表过长，占用大量内存，还会降低页面换进换出的效率。

页面若太大，可以减少页表长度，提高页面换进换出效率，但会使页面内部碎片增大。

因此，页面大小选择适中，应是2的幂次。

## 页表

在分页系统中，允许将进程的各个页离散地存储在内存不同的物理块中，但系统应能保证进程的正确运行，即能在内存中找到每个页面所对应的物理块，为此，系统又为每个进程建立了一张页面映像表，简称页表。

在配置了页表后，进程执行时，通过查找该页表，即可找到每页在内存中的块号，页表的作用是**实现从页号到物理块号的地址映射**。

# 段式存储

从分区方式到分页方式发展的主要原因是为了提高主存空间利用率。那么，分段存储管理的引入，主要是满足用户编程和使用上的要求。

在段式存储管理中，将程序地址空间划分为若干个段，这样每个进程有一个二维的地址空间。为每一个段分配一个连续的分区，而进程中的各个段可以不连续的存放在内存的不同分区中。程序加载时，操作系统为所有段分配其所需内存，这些段不必连续，物理内存额管理采用动态分区的管理方法。

在进行存储分配时，应为进入主存的每个用户作业建立一张段表，各段在主存的情况可用一张段表来记录，它指出主存储器中每个分段的起始地址和长度。

# 段页式存储

段页式存储组织是分段式和分页式结合的存储组织方法，这样可充分利用分段管理和分页管理的优势。

* **用分段方法来分配和管理虚拟存储器**。程序的地址空间按逻辑单位分成基本独立的段，而每一段有自己的段名，再把每页分成固定大小的若干页。
* **用分页方法来分配和管理实存**。即把整个主存分成与上述页大小相等的存储块，可装入作业的任何一页。程序对内存的调入或调出是按页进行的。但它又可按段实现共享和保护。

为了进行地址转换，系统为每个作业建立一个段表，并且要为该作业段表中的每一个段建立一个页表。系统中有一个段表地址寄存器来指出作业的段表起始地址和段表长度。

## 优点

* 提供了大量的虚拟存储空间
* 能有效的利用主存，为组织多道程序运行提供了方便

## 缺点

* 增加了硬件成本、系统的复杂性和管理上的开销
* 存在着系统发生抖动的危险
* 存在内部碎片
* 各种表格要占用主存空间